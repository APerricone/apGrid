<html>

<head>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="apgrid.css">
    <link rel="stylesheet" href="apGrid-green.css">
    <script src="https://code.jquery.com/jquery-3.5.0.min.js"
        integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
        integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
    <script src="apgrid.js"></script>
    <script>
        $(function () {
            // create fake database
            var names = ["Agostino", "Benedetto", "Carla", "Daria",
                "Emilio", "Francesco", "Giuseppe", "Ignazio",
                "Julio", "Katia", "Lorenzo", "Mario",
                "Noemi", "Oreste", "Paolo", "Quasimodo",
                "Rosario", "Stefania", "Tano", "Umberto",
                "Vittoria", "Wilma", "Xavier", "Yasmina", "Zaida"];
            var surnames = ["Amadori", "Brunetti", "Carollo", "D'Aiuto",
                "Enrighi", "Facchinetti", "Graziani", "Iniziati",
                "Javier", "Kommodori", "Lo Porto", "Montella",
                "Natali", "Orlando", "Perricone", "Quadri",
                "Rossi", "Stefanelli", "Taricone", "Umili",
                "Vasquez", "Wagner", "Xun", "Yamada", "Zonca"];
            var cities = ["Grosseto", "Milano", "Palermo", "Ferrara",
                "Ancona", "Domodossola", "Catania", "Bari",
                "Nuoro", "Salerno"];
            Array.prototype.getRand = function () {
                return this[Math.floor(Math.random() * this.length)];
            }
            Date.getRand = function(start, end) {
                start= start || (new Date()).addFullYear(-10);
                end= end || (new Date());
                return new Date(+start + Math.random() * (end - start));
            }
            Date.prototype.addFullYear = function (delta) {
                this.setFullYear(this.getFullYear()+delta);
                return this;
            }
            var end = (new Date()).addFullYear(-18)
            var start = (new Date(end)).addFullYear(-60);
            var data = [];
            for (var i = 0; i < 1000; i++) {
                data.push([names.getRand(), surnames.getRand(), cities.getRand(),
                    10000 + Math.floor(Math.random() * 50000),
                    Date.getRand(start,end)]);
            }

            // direct data source, it can be an object that return this type of data
            function demoDataSource(opt) {
                var defOpt = { start: 1, end: 1000}
                opt = $.extend(defOpt, opt);
                return { start: opt.start, end: opt.end, totalRows: data.length, rows: data.splice(opt.start-1, opt.end-1) };
            }
            // ajax data source, simulate 500ms to get the data.
            function demoDataSourcePromise(opt) {
                return new Promise((res) => setTimeout(() => res(demoDataSource(opt), 500)));
            }
            $("#test").apGrid({
                columns: [
                    { name: "Nome", percent: 30, type: "string" },
                    { name: "Cognome", percent: 30, type: "string" },
                    { name: "CittÃ ", percent: 15, type: "string" },
                    { name: "Reddito", percent: 10, type: "number" },
                    { name: "Nascita", percent: 10, type: "date", format: (a) => a.toLocaleDateString() },
                ],
                data: data
            });
            $("#test").apGrid("addFooter",'<div style="text-align: right;">100 elements</div>')
            //$("#test").apGrid("addFooter", () => `<div style="text-align: right;">${$("#test").apGrid("nRows")} elements</div>`)
        });
    </script>
</head>

<body>
    <h1>Space before</h1>
    <span>text text text text text text text text text text text text text
        text text text text text text text text text text text text text
        text text text text text text text text text text text text text
    </span>
    <div id="test"></div>
</body>

</html>